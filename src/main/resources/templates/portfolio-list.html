<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Portfolio List</title>
    <link rel="stylesheet" href="/main.css">
</head>
<body>

<div th:replace="~{nav.html :: navbar}"></div>

<div class="container">
    <h1>Your Portfolios</h1>

    <!-- ν¬νΈν΄λ¦¬μ¤ λ©λ΅ -->
    <table>
        <thead>
        <tr>
            <th>Portfolio ID</th>
            <th>Member ID</th>
            <th>Portfolio Name</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <!-- ν¬νΈν΄λ¦¬μ¤ λ©λ΅ μ¶λ ¥ -->
        <tr th:each="portfolio : ${portfolios}">
            <td th:text="${portfolio.id}"></td>
            <td th:text="${portfolio.memberId}"></td>
            <td>
                <a th:text="${portfolio.name}" th:href="@{'/portfolio/' + ${portfolio.id}}">
                    PortfolioName
                </a>
            </td>
            <td>
                <!-- μμ • λ²„νΌ -->
                <button onclick="showEditForm(0)">
                    βοΈ
                </button>

                <!-- μ‚­μ  λ²„νΌ -->
                <form method="post" style="display:inline;">
                    <input type="hidden" name="_method" value="delete"/>
                    <button type="submit" onclick="location.reload()">π—‘οΈ</button>
                </form>

                <!-- ν¬νΈν΄λ¦¬μ¤ μƒμ„Έλ³΄κΈ° -->
                <a>
                    View Details
                </a>
            </td>
        </tr>
        </tbody>
    </table>
    <hr>

    <!-- ν¬νΈν΄λ¦¬μ¤ μμ • νΌ (μ¨κ²¨μ Έ μμ) -->
    <div id="edit-form" style="display:none;">
        <h3>Edit Portfolio</h3>
        <form>
            <input type="hidden" id="edit-portfolio-id" name="portfolioId">

            <label for="edit-memberId">Member ID:</label>
            <input type="number" id="edit-memberId" name="memberId" required>

            <button type="submit">Update Portfolio</button>
        </form>
    </div>

    <!-- ν¬νΈν΄λ¦¬μ¤ μ¶”κ°€ νΌ -->
    <h3>Add New Portfolio</h3>
    <form action="/portfolio/add" method="POST">
        <span>Portfolio Name <input type="text" name="portfolioName"></span>
        <button type="submit">Add</button>
    </form>
    <hr>

    <script>
        // μμ • νΌμ„ ν‘μ‹ν•κ³ , μ„ νƒλ ν¬νΈν΄λ¦¬μ¤ λ°μ΄ν„°λ¥Ό μ…λ ¥
        function showEditForm(id) {
            document.getElementById('edit-form').style.display = 'block';
            document.getElementById('edit-portfolio-id').value = id;
            // ν•„μ”ν• κ²½μ°, memberIdλ„ μ¶”κ°€ μ„¤μ •
        }
    </script>
</div>

</body>
</html>