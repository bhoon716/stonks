<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Portfolio List</title>
    <link rel="stylesheet" href="/main.css">
</head>
<body>

<div th:replace="~{nav.html :: navbar}"></div>

<div class="container">
    <h1>Your Portfolios</h1>

    <!-- Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ Î™©Î°ù -->
    <table>
        <thead>
        <tr>
            <th>Portfolio ID</th>
            <th>Member ID</th>
            <th>Portfolio Name</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <!-- Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ Î™©Î°ù Ï∂úÎ†• -->
        <tr th:each="portfolio : ${portfolios}">
            <td th:text="${portfolio.id}"></td>
            <td th:text="${portfolio.memberId}"></td>
            <td>
                <a th:text="${portfolio.name}" th:href="@{'/portfolio/' + ${portfolio.id}}"></a>
            </td>
            <td>
                <!-- ÏàòÏ†ï Î≤ÑÌäº -->
                <button onclick="showEditForm()">‚úèÔ∏è</button>

                <!--Ïù¥Î¶Ñ Î≥ÄÍ≤Ω Ìèº-->
                <form action="/portfolio/change-name" method="post" id="edit-form" style="display: none">
                    <input type="text" name="nameToChange" style="display: inline">
                    <input type="hidden" name="portfolioId" th:value="${portfolio.id}">
                    <button type="submit" style="display: inline">Ïù¥Î¶Ñ Î≥ÄÍ≤Ω</button>
                </form>

                <!-- ÏÇ≠Ï†ú Î≤ÑÌäº -->
                <form action="/portfolio" th:method="delete" style="display:inline;">
                    <input type="hidden" name="portfolioId" th:value="${portfolio.id}">
                    <button type="submit">üóëÔ∏è</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
    <hr>

    <!-- Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ Ï∂îÍ∞Ä Ìèº -->
    <h3>Add New Portfolio</h3>
    <form action="/portfolio/add" method="POST">
        <span>Portfolio Name <input type="text" name="portfolioName"></span>
        <button type="submit">Add</button>
    </form>
    <hr>
</div>

<script>
    function showEditForm(){
        let editForm = document.getElementById("edit-form");
        if (editForm.style.display === "none") {
            editForm.style.display = "inline-block";
        }
    }
</script>

</body>
</html>