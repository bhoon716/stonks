<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Portfolio</title>
    <link rel="stylesheet" href="/main.css">
</head>
<body>

<div th:replace="~{nav.html :: navbar}"></div>

<div>
    <!--ν¬νΈν΄λ¦¬μ¤ μ„ νƒν•λ” κµ¬μ—­-->
</div>

<div>
    <!--ν¬νΈν΄λ¦¬μ¤ κ°μ”: μ΄ μμ‚°, μμµλ¥  λ“±λ“±-->
</div>
<div class="container">
    <!-- ν¬νΈν΄λ¦¬μ¤ μ •λ³΄ -->
    <div>
        <h2>My Portfolio : <span th:text="${customPortfolio.name}"></span></h2>
        <p>Member ID: <span th:text="${customPortfolio.memberId}"></span></p>
    </div>

    <!-- μ£Όμ‹ μ •λ³΄ -->
    <h3>ν¬νΈν΄λ¦¬μ¤ κµ¬μ„±</h3>
    <table>
        <thead>
        <tr>
            <th>μ‹¬λ³Ό</th>
            <th>ν„μ¬κ°€κ²©</th>
            <th>κµ¬λ§¤κ°€κ²©</th>
            <th>λ³΄μ μλ‰</th>
            <th>ν‰κ°€κΈμ•΅</th>
            <th>ν‰κ°€μ†μµ</th>
            <th>μμµλ¥ </th>
            <th>λΉ„μ¤‘</th>
            <th>μ‚­μ </th>
        </tr>
        </thead>
        <tbody>
        <!-- μ£Όμ‹ λ©λ΅ μ¶λ ¥ -->
        <tr th:each="customPortfolioStock : ${customPortfolio.customPortfolioStockList}">
            <!-- ν‹°μ»¤λ… -->
            <td th:text="${customPortfolioStock.stock.symbol}"></td>
            <td th:text="${customPortfolioStock.currentPrice}"></td>
            <td th:text="${customPortfolioStock.purchasePrice}"></td>
            <!-- μλ‰ -->
            <td th:text="${customPortfolioStock.quantity}"></td>
            <!-- ν‰κ°€κΈ: ν„μ¬ κ°€κ²© * μλ‰ -->
            <td th:text="${customPortfolioStock.currentPrice * customPortfolioStock.quantity} + ' $'"></td>
            <!-- ν‰κ°€μ†μµ: (ν„μ¬ κ°€κ²© - κµ¬λ§¤ κ°€κ²©) * μλ‰ -->
            <td th:text="${customPortfolioStock.valuationGainLoss}"></td>
            <!-- μμµλ¥ : (ν„μ¬ κ°€κ²© - κµ¬λ§¤ κ°€κ²©) / κµ¬λ§¤ κ°€κ²© * 100 -->
            <td th:text="${customPortfolioStock.gainLossPercentage}"></td>
            <td th:text="${customPortfolioStock.ratio}"></td>
            <!-- μ‚­μ  λ²„νΌ -->
            <td>
                <form action="/portfolio/stock" th:method="delete">
                    <input type="hidden" name="portfolioStockId" th:value="${customPortfolioStock.id}"/>
                    <input type="hidden" name="portfolioId" th:value="${customPortfolio.id}"/>
                    <button type="submit">π—‘οΈ</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>


    <div>
        μ΄ ν‰κ°€κΈμ•΅: <p th:text="${customPortfolio.totalAssets}"></p>
        μ΄ μ†μµ: <p th:text="${customPortfolio.totalValuationGainLoss}"></p>
        μ΄ μμµλ¥ : <p th:text="${customPortfolio.totalGainLossPercentage}"></p>
    </div>

    <!-- μ£Όμ‹ μ¶”κ°€ νΌ -->
    <h3>μ£Όμ‹ μ¶”κ°€ν•κΈ°</h3>
    <form action="/portfolio/add-stock" method="post">
        <p>μ‹¬λ³Ό <input type="text" name="symbol"></p>
        <p>ν‰κ· κµ¬λ§¤λ‹¨κ°€ <input type="text" name="purchasePrice"></p>
        <p>λ³΄μ  μλ‰ <input type="text" name="quantity"></p>
        <input type="hidden" name="id" th:value="${customPortfolio.id}">
        <button type="submit">μ¶”κ°€</button>
    </form>

</div>

</body>
</html>
